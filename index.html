<!DOCTYPE html>
<html lang="en">
<head>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#ff9900" />

  <!-- iOS full-screen + icon -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="icon-192.png">

  <!-- IMPORTANT: relative path -->
  <link rel="manifest" href="manifest.json" />

  <title>Production Calculator</title>
  <!-- …your styles remain the same… -->
</head>
<body>
  <!-- …your HTML stays exactly as you posted… -->

  <script>
    // Your existing JS (tabs, calculators, language) stays as-is…

    // PWA: register service worker with relative scope
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker
          .register('./service-worker.js', { scope: './' })
          .then(reg => console.log('SW registered', reg.scope))
          .catch(err => console.error('SW registration failed', err));
      });
    }
  </script>
</body>
<title>Production Calculator</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    height: 100%;
    font-family: Arial, sans-serif;
    background-color: #222;
    color: #fff;
  }

  .language-select {
    margin: 10px;
    padding: 5px;
    width: 200px;
  }

  .tabs { 
    display: flex; 
    cursor: pointer; 
    background-color: #333; 
  }
  .tab { 
    flex: 1; 
    padding: 10px; 
    text-align: center; 
    border-bottom: 2px solid transparent; 
  }
  .tab.active { 
    border-bottom: 2px solid #f90; 
    background-color: #444; 
  }
  .tab-content { 
    display: none; 
    padding: 20px; 
  }
  .tab-content.active { 
    display: block; 
  }

  label { 
    display: block; 
    margin-top: 10px; 
  }
  input { 
    padding: 5px; 
    width: 100%; 
    margin-top: 5px; 
  }
  button { 
    margin-top: 10px; 
    padding: 10px; 
    background-color: #f90; 
    border: none; 
    cursor: pointer; 
    width: 100%; 
  }

  table { 
    width: 100%; 
    margin-top: 20px; 
    border-collapse: collapse; 
  }
  th, td { 
    border: 1px solid #555; 
    padding: 8px; 
    text-align: center; 
  }
  th { 
    background-color: #333; 
  }
</style>
</head>
<body>

<div class="language-select">
  <label for="language" id="langLabel">Language:</label>
  <select id="language" onchange="setLanguage()">
      <option value="en">English</option>
      <option value="pl">Polish</option>
      <option value="ro">Romanian</option>
  </select>
</div>

<div class="tabs">
  <div class="tab active" onclick="openTab(event, 'sixPack')" id="tabSixPack">6 Pack Order Calculator</div>
  <div class="tab" onclick="openTab(event, 'singles')" id="tabSingles">Singles Order Calculator</div>
  <div class="tab" onclick="openTab(event, 'guide')" id="tabGuide">Guide</div>
</div>

<!-- 6 Pack Calculator -->
<div id="sixPack" class="tab-content active">
  <h2 id="headingSixPack">6 Pack Order Calculator</h2>
  <label id="labelLayers6">Layers:</label>
  <input type="number" id="layers6" value="0">
  <label id="labelTrays6">Individual trays that don't form a full layer:</label>
  <input type="number" id="trays6" value="0">
  <label id="labelLoose6">Loose 6 Packs:</label>
  <input type="number" id="loose6" value="0">
  <label id="labelPrev6">Previous Shift Trays (deducted):</label>
  <input type="number" id="prevTrays6" value="0">
  <button onclick="calculate6Pack()" id="btnCalc6">Calculate</button>

  <h3 id="woHeading6">Works Order Sheet</h3>
  <table>
      <tr><th id="thTrays6">Trays</th><th id="thLoose6">Loose 6 Packs</th></tr>
      <tr><td id="woTrays6"></td><td id="woLoose6"></td></tr>
  </table>

  <h3 id="recHeading6">Record Sheet</h3>
  <table>
      <tr><th id="thRecTrays6">Trays</th><th id="thRecSix6">6 Packs</th><th id="thRecBottles6">Bottles</th></tr>
      <tr><td id="recTrays6"></td><td id="recSixPacks6"></td><td id="recBottles6"></td></tr>
  </table>
</div>

<!-- Singles Calculator -->
<div id="singles" class="tab-content">
  <h2 id="headingSingles">Singles Order Calculator</h2>
  <label id="labelLayersS">Layers:</label>
  <input type="number" id="layersS" value="0">
  <label id="labelTraysS">Trays:</label>
  <input type="number" id="traysS" value="0">
  <label id="labelLooseS">Loose Singles:</label>
  <input type="number" id="looseS" value="0">
  <label id="labelPrevS">Previous Shift Trays (deducted):</label>
  <input type="number" id="prevTraysS" value="0">
  <button onclick="calculateSingles()" id="btnCalcS">Calculate</button>

  <h3 id="woHeadingS">Works Order Sheet</h3>
  <table>
      <tr><th id="thTraysS">Trays</th><th id="thLooseS">Loose Singles</th></tr>
      <tr><td id="woTraysS"></td><td id="woLooseS"></td></tr>
  </table>

  <h3 id="recHeadingS">Record Sheet</h3>
  <table>
      <tr><th id="thRecTraysS">Trays</th><th id="thRecBottlesS">Bottles</th></tr>
      <tr><td id="recTraysS"></td><td id="recBottlesS"></td></tr>
  </table>
</div>

<!-- Guide Tab -->
<div id="guide" class="tab-content">
  <h2 id="headingGuide">Production Calculator Guide</h2>
  <p id="guideText">This calculator helps you correctly calculate the number of trays, 6 packs, singles, and bottles for your production order sheet and record sheet.</p>
  <ul id="guideList">
      <li>Enter the number of layers, individual trays, and loose 6 packs or singles.</li>
      <li>Enter the previous shift trays if carrying over from the last order.</li>
      <li>Click "Calculate" to get the updated numbers for the Works Order Sheet.</li>
      <li>Record Sheet numbers are adjusted automatically for previous shift trays.</li>
  </ul>
</div>

<script>
// Tabs
function openTab(evt, tabName) {
    document.querySelectorAll(".tab-content").forEach(tc => tc.classList.remove("active"));
    document.querySelectorAll(".tab").forEach(tab => tab.classList.remove("active"));
    document.getElementById(tabName).classList.add("active");
    evt.currentTarget.classList.add("active");
}

// 6 Pack Calculation
function calculate6Pack() {
    const layers = parseInt(document.getElementById('layers6').value) || 0;
    const trays = parseInt(document.getElementById('trays6').value) || 0;
    const loose6 = parseInt(document.getElementById('loose6').value) || 0;
    const prevTrays = parseInt(document.getElementById('prevTrays6').value) || 0;

    const totalTrays = (layers * 7) + trays;
    const totalSixPacks = totalTrays * 42;
    const totalBottles = totalSixPacks * 6;

    document.getElementById('woTrays6').innerText = totalTrays;
    document.getElementById('woLoose6').innerText = loose6;

    const adjTrays = totalTrays - prevTrays;
    const adjSixPacks = (adjTrays * 42) + loose6;
    const adjBottles = adjSixPacks * 6;

    document.getElementById('recTrays6').innerText = adjTrays;
    document.getElementById('recSixPacks6').innerText = adjSixPacks;
    document.getElementById('recBottles6').innerText = adjBottles;
}

// Singles Calculation
function calculateSingles() {
    const layers = parseInt(document.getElementById('layersS').value) || 0;
    const trays = parseInt(document.getElementById('traysS').value) || 0;
    const looseS = parseInt(document.getElementById('looseS').value) || 0;
    const prevTrays = parseInt(document.getElementById('prevTraysS').value) || 0;

    const totalTrays = (layers * 7) + trays;
    const totalBottles = totalTrays * 42 + looseS;

    document.getElementById('woTraysS').innerText = totalTrays;
    document.getElementById('woLooseS').innerText = looseS;

    const adjTrays = totalTrays - prevTrays;
    const adjBottles = (adjTrays * 42) + looseS;

    document.getElementById('recTraysS').innerText = adjTrays;
    document.getElementById('recBottlesS').innerText = adjBottles;
}

// Language selection
function setLanguage() {
    const lang = document.getElementById('language').value;
    const translations = {
        en: {
            tabSixPack: "6 Pack Order Calculator",
            tabSingles: "Singles Order Calculator",
            tabGuide: "Guide",
            headingSixPack: "6 Pack Order Calculator",
            labelLayers6: "Layers:",
            labelTrays6: "Individual trays that don't form a full layer:",
            labelLoose6: "Loose 6 Packs:",
            labelPrev6: "Previous Shift Trays (deducted):",
            btnCalc6: "Calculate",
            woHeading6: "Works Order Sheet",
            thTrays6: "Trays",
            thLoose6: "Loose 6 Packs",
            recHeading6: "Record Sheet",
            thRecTrays6: "Trays",
            thRecSix6: "6 Packs",
            thRecBottles6: "Bottles",
            headingSingles: "Singles Order Calculator",
            labelLayersS: "Layers:",
            labelTraysS: "Trays:",
            labelLooseS: "Loose Singles:",
            labelPrevS: "Previous Shift Trays (deducted):",
            btnCalcS: "Calculate",
            woHeadingS: "Works Order Sheet",
            thTraysS: "Trays",
            thLooseS: "Loose Singles",
            recHeadingS: "Record Sheet",
            thRecTraysS: "Trays",
            thRecBottlesS: "Bottles",
            headingGuide: "Production Calculator Guide",
            guideText: "This calculator helps you correctly calculate the number of trays, 6 packs, singles, and bottles for your production order sheet and record sheet.",
        }
        // Add Polish (pl) and Romanian (ro) here if needed
    };

    const t = translations[lang] || translations.en;
    for (const id in t) {
        if (document.getElementById(id)) {
            document.getElementById(id).innerText = t[id];
        }
    }
}
</script>
</body>
</html>
